<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Whilst developing a website for a client I had a need to bulk check the availability of potential .com domain names. Finding .com domain names for the words you would like to use can be quite a job. Most of the websites that allow you to check whether a domain ...">
    <meta name="keywords" content="">
    <meta name="author" content="Steve McArthur">
    <meta property="og:title" content="How to Bulk Check Domain Availability Using Node.js">
    <meta property="og:description" content="Whilst developing a website for a client I had a need to bulk check the availability of potential .com domain names. Finding .com domain names for the words you would like to use can be quite a job. Most of the websites that allow you to check whether a domain ...">
    <meta property="og:image" content="/img/node-domain-checker.jpg">
    <meta property="og:url" content="https://www.codecallback.co.uk/how-to-bulk-check-domain-availability-using-nodejs">
    
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <title>How to Bulk Check Domain Availability Using Node.js | Coding Callback</title>
    <link href="https://fonts.googleapis.com/css?family=Poppins:900|Roboto:300,400,400i,500,700,900" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/css/prism-vscode.css" rel="stylesheet">
    <link href="/css/vb.css" rel="stylesheet">
    <link href="/css/nav.css" rel="stylesheet">
    <link href="/css/footer.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/css/home-grid.css" rel="stylesheet">
    <link href="/css/meta.css" rel="stylesheet">
    <link href="/css/color.css" rel="stylesheet">
    <link href="/css/fonts.css" rel="stylesheet">


    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <nav class="navbar navbar-expand-lg navbar-light">
  <div class="container">
    <a class="navbar-brand" href="/">
       <span class="sym"><img src="/img/sign.png" ></span>
       <div class="item">
      <span class="sml">if</span><span class="brand">Coding</span><span class="brand2">Callback</span><span class="sml">then</span>
      </div>
    </a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">About</a>
      </li>
    <li class="nav-item">
        <a class="nav-link" href="#">Contact</a>
      </li>
    </ul>
  </div>
  </div>
</nav>          <div class="header-content">
        <div class="overlay nodejs">
        <div class="container">
        <div class="header-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <div class="meta">
         
    <span>Node.js</span> | September 3rd 2018 | By Steve McArthur     
</div>                <div class="page-title">
                    <h1>How to Bulk Check Domain Availability Using Node.js</h1>
                </div>
          
            </div>
        </div>
        </div>
        </div>
        </div>
    </div>
<div class="container main">
    <article class="post-content">
        <div class="row">
            <div class="col-lg-12">
                <p>Whilst developing a website for a client I had a need to bulk check the availability of potential .com domain names. Finding .com domain names for the words you would like to use can be quite a job.</p>
<p>Most of the websites that allow you to check whether a domain name is available only let you check one domain at a time. They can also be quite slow and push adverts for .neverheardof TLDs.</p>
<p>I also wanted to easily test for differing word orders. Like &quot;pinkelephants.com&quot; and &quot;elephantspink.com&quot;.</p>
<p>Node.js has a NPM package available called <a href="https://www.npmjs.com/package/whois">whois</a> (formally &quot;node-whois&quot;). This does a whois lookup for any domain name you supply to it.</p>
 <pre data-code="Node.js"><code class="language-javascript">
    var whois = require('whois');
    whois.lookup("pinkelephants.com", function (err, data) {
            if (err) {
                console.error(err);
            } else {
                //do something with data
                //which will just be a typical whois text output
            }

    });
</code></pre>

<p>Typically the data returned for a .com query where a domain already registered will be something like this:</p>
<blockquote>
<p>   Domain Name: PINKELEPHANTS.COM
   Registry Domain ID: 104511878_DOMAIN_COM-VRSN
   Registrar WHOIS Server: whois.uniregistrar.com
   Registrar URL: <a href="http://www.uniregistrar.com">http://www.uniregistrar.com</a>
   Updated Date: 2017-11-29T15:22:08Z
   Creation Date: 2003-10-03T18:26:29Z
   Registry Expiry Date: 2019-10-03T18:26:29Z 
   ...</p>
</blockquote>
<p>Where the domain is NOT registered it will be:</p>
<blockquote>
<p>No match for domain &quot;ELEPHANTSPINK.COM&quot;.
...</p>
</blockquote>
<p>So I search for the phrase on the first line of: &quot;No match for domain&quot;.</p>
<p>What I did then was get my script to read a list of words or phrases I wanted to test for. If I wanted to test different word orders I would seperate the words with a <code>|</code> (pipe) and the script will use this to split the two words and try two tests with one first and the other second.</p>
<pre data-code="Node.js"><code class="language-javascript">
    var whois = require('whois');
    var fs = require('fs');
    var path = require('path');

    function doLookup(domain, cb) {
        whois.lookup(domain, function (err, data) {
            console.log("lookup returned");
            if (err) {
                console.error(err);
            } else {
                cb(err, data, domain)
            }
        });
    }
    var noMatch = new RegExp(/No match for domain/);

    var txt = fs.readFileSync("./domains.txt", "utf-8");
    var items = txt.split("\r\n");
    var domainList = [];
    function addDomain(name) {
        if (name) {
            domainList.push(name + ".com");
            console.log(name + " added");
        } else {
            console.log("cannot add blank name...");
        }
    }
    var i = 0;
    for (i = 0; i < items.length; i++) {
        var words = items[i].split("|");
        if (words.length > 1) {
            addDomain(words[0] + words[1]);
            addDomain(words[1] + words[0]);
        } else {
            addDomain(words[0])
        }
    }

    var k = 0;
    var output = [];
    var writeResults = true;
    function onReturn(err, data, domain) {
        var lines = data.split('\n');
        var firstLine = lines[0];
        console.log(firstLine);
        var m = firstLine.match(noMatch);
        var available = m ? true : false;
        console.log(domain + ": " + available);
        output.push(domain + ", " + available);
        if (writeResults) {
            fs.writeFileSync(domain + "-result.txt", data, 'utf-8');
        }
        k++;
        if (k < domainList.length) {
            doLookup(domainList[k], onReturn);
        } else {
            var txtfile = domainList[0] + "-" + domainList[domainList.length - 1] + ".txt";
            var txt = output.join("\n");
            fs.writeFileSync(txtfile, txt, "utf-8");
            console.log(domainList.length + " domains processed");
        }
    }

    doLookup(domainList[0], onReturn);
</code></pre>                            </div>
        </div>
    </article>
</div> 
        <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="row top hidden">
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="widget">
                    <h4>Coding Callback</h4>
                    <p>

                    </p>               
                </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="widget">
             
                </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="widget">
                    <h4>Coding Callback</h4>
                    <p>

                    </p>               
                </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                   <div class="widget">
                    
                </div>
            </div>

        </div>
        <div class="bottom">
            Copyright © Coding Callback 2018 | <a href="/terms-and-conditions/">Terms and Conditions</a> | <a href="/privacy-policy/">Privacy</a>
        </div>
      </div>
    </footer>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/js/ie10-viewport-bug-workaround.js"></script>
    <script src="/js/prism/prism.js"></script>
    <script src="/js/prism/prism-javascript.js"></script>
    <script src="/js/prism/prism-json.js"></script>
    <script src="/js/prism/prism-visual-basic.js"></script>
    <script src="/js/prism/prism-markup.js"></script>
    <script src="/js/prism/prism-markup-templating.js"></script>
    <script src="/js/prism/prism-handlebars.js"></script>
    <script src="/js/prism/prism-coffeescript.js"></script>





    </body>
</html>

